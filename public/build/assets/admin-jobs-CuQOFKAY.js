const h={clean:{icon:!1,iconHtml:"",buttonsStyling:!0,allowOutsideClick:!0,allowEscapeKey:!0,showClass:{popup:"animate__animated animate__fadeInDown animate__faster"},hideClass:{popup:"animate__animated animate__fadeOutUp animate__faster"}},confirmation:{showCancelButton:!0,reverseButtons:!0,focusCancel:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d"},success:{confirmButtonColor:"#28a745",timer:3e3,timerProgressBar:!0,showCancelButton:!1},error:{confirmButtonColor:"#dc3545",showCancelButton:!1},loading:{allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1}};function d(n,e={}){const t={...h.clean},o=h[n]||{};return{...t,...o,...e}}function u(n,e){if(typeof Swal>"u")return;const t=d("loading",{title:n,text:e,didOpen:()=>{Swal.showLoading()}});Swal.fire(t)}function y(n){if(console.log("📢 Showing success message:",n),typeof Swal>"u"){alert(n);return}const e=d("success",{title:"Success!",text:n});Swal.fire(e)}function c(n){if(console.log("⚠️ Showing error message:",n),typeof Swal>"u"){alert(n);return}const e=d("error",{title:"Error",text:n});Swal.fire(e)}function w(n,e="Information"){if(console.log("ℹ️ Showing info message:",n),typeof Swal>"u"){alert(n);return}const t=d("clean",{title:e,text:n,confirmButtonColor:"#007bff",showCancelButton:!1});Swal.fire(t)}function p(n,e="Warning"){if(console.log("⚠️ Showing warning message:",n),typeof Swal>"u"){alert(n);return}const t=d("clean",{title:e,text:n,confirmButtonColor:"#ffc107",showCancelButton:!1});Swal.fire(t)}class b{constructor(){this.init()}init(){document.addEventListener("click",e=>{if(e.target.classList.contains("category-delete-btn")||e.target.closest(".category-delete-btn")){e.preventDefault();const t=e.target.classList.contains("category-delete-btn")?e.target:e.target.closest(".category-delete-btn"),o=t.getAttribute("data-category-id"),i=t.getAttribute("data-category-name");this.showDeleteConfirmation(o,i)}})}showDeleteConfirmation(e,t){typeof Swal<"u"?this.showSweetAlertDeleteConfirmation(e,t):confirm(`Are you sure you want to delete "${t}"? This action cannot be undone and will permanently remove the category.`)&&this.submitDeleteForm(e)}showSweetAlertDeleteConfirmation(e,t){const o=d("confirmation",{title:"Delete Category?",text:`Are you sure you want to delete "${t}"? This action cannot be undone and will permanently remove the category.`,confirmButtonText:"Yes, Delete Category",cancelButtonText:"Cancel"});Swal.fire(o).then(i=>{i.isConfirmed&&(u("Deleting Category...","Please wait while we delete the category."),this.submitDeleteForm(e))}).catch(i=>{console.error("SweetAlert error:",i),confirm(`Are you sure you want to delete "${t}"? This action cannot be undone and will permanently remove the category.`)&&this.submitDeleteForm(e)})}submitDeleteForm(e){const t=this.getFreshCSRFToken();if(!t){c("CSRF token not found. Please refresh the page and try again.");return}const o=document.createElement("form");o.method="POST",o.action=`/admin/categories/${e}`,o.style.display="none";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=t,o.appendChild(i);const r=document.createElement("input");r.type="hidden",r.name="_method",r.value="DELETE",o.appendChild(r),document.body.appendChild(o);try{o.submit()}catch(a){console.error("Error submitting form:",a),c("An error occurred while deleting. Please try again.")}}getFreshCSRFToken(){const e=document.querySelector('meta[name="csrf-token"]');if(e)return e.getAttribute("content");const t=document.querySelector('form input[name="_token"]');return t?t.value:(console.error("CSRF token not found!"),null)}}class S{constructor(){this.init()}init(){document.addEventListener("click",e=>{if(e.target.classList.contains("job-delete-btn")||e.target.closest(".job-delete-btn")){e.preventDefault();const t=e.target.classList.contains("job-delete-btn")?e.target:e.target.closest(".job-delete-btn"),o=t.getAttribute("data-job-id"),i=t.getAttribute("data-job-title");this.showDeleteConfirmation(o,i)}})}showDeleteConfirmation(e,t){typeof Swal<"u"?this.showSweetAlertDeleteConfirmation(e,t):confirm(`Are you sure you want to delete "${t}"? This action cannot be undone and will permanently remove the job and all its requests.`)&&this.submitDeleteForm(e)}showSweetAlertDeleteConfirmation(e,t){const o=d("confirmation",{title:"Delete Job?",text:`Are you sure you want to delete "${t}"? This action cannot be undone and will permanently remove the job and all its requests.`,confirmButtonText:"Yes, Delete Job",cancelButtonText:"Cancel"});Swal.fire(o).then(i=>{i.isConfirmed&&(u("Deleting Job...","Please wait while we delete the job."),this.submitDeleteForm(e))}).catch(i=>{console.error("SweetAlert error:",i),confirm(`Are you sure you want to delete "${t}"? This action cannot be undone and will permanently remove the job and all its requests.`)&&this.submitDeleteForm(e)})}submitDeleteForm(e){const t=this.getFreshCSRFToken();if(!t){c("CSRF token not found. Please refresh the page and try again.");return}const o=document.createElement("form");o.method="POST",o.action=`/admin/jobs/${e}`,o.style.display="none";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=t,o.appendChild(i);const r=document.createElement("input");r.type="hidden",r.name="_method",r.value="DELETE",o.appendChild(r),document.body.appendChild(o);try{o.submit()}catch(a){console.error("Error submitting form:",a),c("An error occurred while deleting. Please try again.")}}getFreshCSRFToken(){const e=document.querySelector('meta[name="csrf-token"]');if(e)return e.getAttribute("content");const t=document.querySelector('form input[name="_token"]');return t?t.value:(console.error("CSRF token not found!"),null)}}class v{constructor(){this.init()}init(){document.addEventListener("click",e=>{if(e.target.classList.contains("service-delete-btn")||e.target.closest(".service-delete-btn")){e.preventDefault();const t=e.target.classList.contains("service-delete-btn")?e.target:e.target.closest(".service-delete-btn"),o=t.getAttribute("data-service-id"),i=t.getAttribute("data-service-title");this.showDeleteConfirmation(o,i)}})}showDeleteConfirmation(e,t){typeof Swal<"u"?this.showSweetAlertDeleteConfirmation(e,t):confirm(`Are you sure you want to delete "${t}"? This action cannot be undone and will permanently remove the service and all its requests.`)&&this.submitDeleteForm(e)}showSweetAlertDeleteConfirmation(e,t){const o=d("confirmation",{title:"Delete Service?",text:`Are you sure you want to delete "${t}"? This action cannot be undone and will permanently remove the service and all its requests.`,confirmButtonText:"Yes, Delete Service",cancelButtonText:"Cancel"});Swal.fire(o).then(i=>{i.isConfirmed&&(u("Deleting Service...","Please wait while we delete the service."),this.submitDeleteForm(e))}).catch(i=>{console.error("SweetAlert error:",i),confirm(`Are you sure you want to delete "${t}"? This action cannot be undone and will permanently remove the service and all its requests.`)&&this.submitDeleteForm(e)})}submitDeleteForm(e){const t=this.getFreshCSRFToken();if(!t){c("CSRF token not found. Please refresh the page and try again.");return}const o=document.createElement("form");o.method="POST",o.action=`/admin/services/${e}`,o.style.display="none";const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=t,o.appendChild(i);const r=document.createElement("input");r.type="hidden",r.name="_method",r.value="DELETE",o.appendChild(r),document.body.appendChild(o);try{o.submit()}catch(a){console.error("Error submitting form:",a),c("An error occurred while deleting. Please try again.")}}getFreshCSRFToken(){const e=document.querySelector('meta[name="csrf-token"]');if(e)return e.getAttribute("content");const t=document.querySelector('form input[name="_token"]');return t?t.value:(console.error("CSRF token not found!"),null)}}class C{constructor(){this.init()}init(){this.displaySessionMessages()}displaySessionMessages(){const e=this.getSessionMessage("success");e&&y(e);const t=this.getSessionMessage("error");t&&c(t)}getSessionMessage(e){const t=document.querySelector(`[data-session-${e}]`);return t?t.getAttribute(`data-session-${e}`):null}}class M{constructor(){this.activeModal=null,this.init()}init(){this.setupEventListeners()}setupEventListeners(){document.addEventListener("click",t=>{t.target.classList.contains("modal")&&t.target.style.display==="flex"&&this.closeModal(t.target.id)}),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.activeModal&&this.closeModal(this.activeModal)}),document.querySelectorAll(".modal-close").forEach(t=>{t.addEventListener("click",o=>{o.preventDefault();const i=t.closest(".modal");i&&this.closeModal(i.id)})})}openModal(e){this.activeModal&&this.closeModal(this.activeModal);const t=document.getElementById(e);if(!t){console.error("Modal not found:",e);return}t.style.display="flex",t.classList.add("modal-open"),t.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",document.body.classList.add("modal-open"),this.activeModal=e,setTimeout(()=>{const o=t.querySelector("input, textarea, select");o&&o.focus()},100)}closeModal(e){const t=document.getElementById(e);if(!t){console.error("Modal not found:",e);return}t.style.display="none",t.classList.remove("modal-open"),t.setAttribute("aria-hidden","true"),document.body.style.overflow="",document.body.classList.remove("modal-open"),this.activeModal===e&&(this.activeModal=null);const o=t.querySelector("form");o&&(o.reset(),o.querySelectorAll(".error").forEach(r=>{r.classList.remove("error"),r.style.borderColor=""}))}}let l;window.openCategoryModal=function(){l&&l.openModal("categoryModal")};window.closeCategoryModal=function(){l&&l.closeModal("categoryModal")};window.editCategory=function(n){var f;const e=(f=window.categoriesData)==null?void 0:f.find(g=>g.id===n);if(!e){console.error("Category not found:",n);return}const t=document.getElementById("categoryForm"),o=document.getElementById("categoryModalTitle"),i=document.getElementById("categoryMethod");t&&(t.action="/admin/categories/"+n),o&&(o.textContent="Edit Category"),i&&(i.value="PUT");const r=document.getElementById("category_name"),a=document.getElementById("category_description"),m=document.getElementById("category_is_active");r&&(r.value=e.name||""),a&&(a.value=e.description||""),m&&(m.checked=e.is_active),l&&l.openModal("categoryModal")};window.toggleFilters=function(n){const e=document.getElementById(n);if(!e){console.error("Filters container not found:",n);return}e.style.display==="none"||e.style.display===""?(e.style.display="block",e.classList.add("filters-open")):(e.style.display="none",e.classList.remove("filters-open"))};window.openJobDetailModal=function(n){const e=document.getElementById("jobDetailModal");if(!e){console.error("Job detail modal not found");return}s(e,".modal-job-title",n.title),s(e,".modal-job-description",n.description),s(e,".modal-job-status",n.status),s(e,".modal-job-client",n.clientName),s(e,".modal-job-category",n.category),s(e,".modal-job-budget",n.budget),s(e,".modal-job-location",n.location),s(e,".modal-job-deadline",n.deadline),s(e,".modal-job-assigned",n.assignedProfessional);const t=e.querySelector(".modal-job-assigned-section");n.assignedProfessional?t.style.display="block":t.style.display="none",l&&l.openModal("jobDetailModal")};window.closeJobDetailModal=function(){l&&l.closeModal("jobDetailModal")};window.openServiceDetailModal=function(n){const e=document.getElementById("serviceDetailModal");if(!e){console.error("Service detail modal not found");return}s(e,".modal-service-title",n.title),s(e,".modal-service-description",n.description),s(e,".modal-service-status",n.status),s(e,".modal-service-professional",n.professionalName),s(e,".modal-service-specialization",n.specialization),s(e,".modal-service-category",n.category),s(e,".modal-service-price",n.price),s(e,".modal-service-area",n.serviceArea),l&&l.openModal("serviceDetailModal")};window.closeServiceDetailModal=function(){l&&l.closeModal("serviceDetailModal")};function s(n,e,t){const o=n.querySelector(e);o&&t?(o.textContent=t,o.style.display="block"):o&&(o.style.display="none")}window.showSuccess=y;window.showError=c;window.showInfo=w;window.showWarning=p;window.showLoadingModal=u;document.addEventListener("DOMContentLoaded",function(){l=new M,new b,new S,new v,new C;const n=document.querySelector(".search-input");n&&window.innerWidth>768&&n.focus(),document.querySelectorAll("form").forEach(t=>{t.addEventListener("submit",function(){t.querySelectorAll('button[type="submit"]').forEach(i=>{i.disabled=!0;const r=i.innerHTML;i.innerHTML='<i class="fas fa-spinner fa-spin"></i> Processing...',setTimeout(()=>{i.disabled=!1,i.innerHTML=r},1e4)})})}),document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(o){o.preventDefault();const i=document.querySelector(this.getAttribute("href"));i&&i.scrollIntoView({behavior:"smooth",block:"start"})})}),console.log("Admin Jobs JS initialized successfully with consistent modal styling")});
